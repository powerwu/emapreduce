# 安全组

本文介绍E-MapReduce集群的安全组信息，以及E-MapReduce加入现有安全组和现有集群加入E-MapReduce安全组的方法。

在创建E-MapReduce集群时，目前您只能使用在E-MapReduce中创建的安全组。创建E-MapReduce集群时，集群所在安全组的22端口默认是关闭的，在创建集群过程中，您通过打开基础配置页面的**远程登录**开关来启用22端口。

推荐您将ECS实例按照功能划分，放于不同的用户安全组中。例如，E-MapReduce的安全组为E-MapReduce安全组，而您已有的安全组为用户-安全组，每个安全组按照不同的需要设置不同的访问控制策略。

## E-MapReduce集群加入现有安全组

**说明：**

-   经典网络类型下，实例必须加入同一地域下经典网络类型的安全组。
-   专有网络类型下，实例必须加入同一专有网络下的安全组。

1.  登录[阿里云E-MapReduce控制台](https://emr.console.aliyun.com/)。

2.  在顶部菜单栏处，根据实际情况选择地域（Region）和资源组。

3.  单击上方的**集群管理**页签。

4.  在**集群管理**页面，单击相应集群所在行的**详情**。

5.  在**主机信息**区域选择实例组，单击对应右侧某个ECS实例的**ECS ID**。

6.  在该ECS实例页面，单击左侧导航栏中的**本实例安全组**。

7.  单击右侧的**加入安全组**。

    在弹出的**ECS实例加入安全组**对话框中，从**安全组**列表中选择需要加入的安全组。

    如果您需要将该ECS实例一次加入多个安全组，选择一个安全组后，单击后面的**加入到批量选择栏**，即会把该安全组加入到批量选择栏中，依次按照相同方法再选择其他安全组，把其他安全组也加入到批量选择栏中即可。

8.  全组选择完成后，单击**确定**。

    多个ECS实例时，请重复以上操作，把E-MapReduce集群中的其他ECS实例也加入到相应安全组中。


## 现有集群加入E-MapReduce安全组

与[E-MapReduce集群加入现有安全组](#section_in4_233_mo6)操作一样，首先获取现有集群所要加入的目标E-MapReduce安全组，然后把现有集群的ECS实例全部加入到目标安全组即可。

如果是一些零散的ECS实例，您也可直接在ECS管理控制台上同时选中这些ECS实例，然后单击下方的**更多** \> **网络和安全组** \> **加入安全组**，将集群的ECS实例批量移入到E-MapReduce的安全组。

## 安全组的规则

一个ECS实例同时加入多个不同的安全组时，安全组的规则是或的关系。例如，E-MapReduce的安全组只开放了22端口，但**用户-安全组**开放了所有的端口。当E-MapReduce的集群加入**用户-安全组**时，E-MapReduce中的ECS实例也会开放所有端口。

