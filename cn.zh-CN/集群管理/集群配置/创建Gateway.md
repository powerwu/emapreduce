# 创建Gateway

创建的Gateway集群应与E-MapReduce集群处于同一个内网中的ECS服务器。您可以使用Gateway集群实现负载均衡和安全隔离，也可以通过Gateway集群向E-MapReduce集群提交作业。

在E-MapReduce中，Gateway集群仅支持关联Hadoop或Kafka类型的集群。因此在创建Gateway集群前，请确保您已经在E-MapReduce中创建了Hadoop或Kafka类型的集群。

## 操作步骤

1.  登录[阿里云E-MapReduce控制台](https://emr.console.aliyun.com/)。

2.  在顶部菜单栏处，根据实际情况选择地域（Region）和资源组。

3.  单击上方的**集群管理**页签。

4.  在**集群管理**页面，单击右上角的**创建Gateway**。

5.  在**创建Gateway**页面，配置各参数。

    |区域|配置项|说明|
    |--|---|--|
    |基础信息|**集群名称**|Gateway集群的名称，长度限制为1~64个字符，只允许包含中文、字母、数字、中划线（-）、下划线（\_）。|
    |**挂载公网**|Gateway是否挂载弹性公网IP地址。|
    |**密码**和**密钥对**|    -   **登录密码**：在文本框中输入登录Gateway的密码。长度限制为8~30个字符，且必须同时包含大写字母、小写字母、数字和特殊字符。

支持输入以下字符：

!@\#$%^&\*

    -   **密钥对**：在列表中选择登录Gateway的密钥对名称。如果还未创建过密钥对，则您可以单击后面的**新建密钥对**，进入ECS管理控制台进行创建。

请妥善保管好密钥对所对应的私钥文件（.pem文件）。Gateway创建成功后，该密钥对的公钥部分会自动绑定到Gateway所在的云服务器ECS上，当通过SSH登录Gateway时，您需要输入私钥文件中的私钥。 |
    |**付费类型**|    -   **包年包月**：一次性支付一段时间的费用，价格相对来说会比较便宜，特别是包三年时，折扣会比较大。
    -   **按量付费**：根据实际使用的小时数来支付费用，每个小时计一次费用。 |
    |集群配置|**关联集群**|Gateway集群需要关联的集群，即创建的Gateway可以提交作业的集群。|
    |**可用区**|关联集群所在的可用区（Zone）。|
    |**网络类型**|关联集群的网络类型。|
    |**VPC**|关联集群所在地域下的VPC。|
    |**交换机**|选择在对应的VPC下对应可用区的交换机。|
    |**安全组名称**|关联集群所属的安全组。|
    |高级设置|**权限设置**|通过RAM角色为在集群上运行的应用程序提供调用其他阿里云服务所需的必要权限，无需调整，使用默认即可。    -   **服务角色**：用户将权限授予EMR服务，允许EMR代表用户调用其他阿里云的服务，例如ECS和OSS。
    -   **ECS应用角色**：当用户的程序在EMR计算节点上运行时，可不填写阿里云AccessKey来访问相关的云服务（例如OSS），EMR会自动申请一个临时AccessKey来授权本次访问。**ECS应用角色**用于控制这个AccessKey的权限。 |
    |**引导操作**|可选配置，您可以在集群启动前执行您自定义的脚本，详情请参见[引导操作](/cn.zh-CN/集群管理/第三方软件/引导操作.md)。|
    |实例|**Gateway 实例**|该区域内可选择的ECS实例规格，详细说明请参见[实例规格族](/cn.zh-CN/实例/实例规格族.md)。     -   **系统盘配置**：Gateway节点使用的系统盘类型。系统盘有高效云盘、ESSD云盘和SSD云盘三种，根据不同机型和不同的Region，系统盘显示类型会有不同。系统盘默认随着集群的释放而释放。
    -   **系统盘大小**：每块最小为40 GB，最大为2048 GB。默认值为300 GB。
    -   **数据盘配置**：Gateway节点使用的数据盘类型。数据盘有高效云盘、ESSD云盘和SSD云盘三种，根据不同机型和不同的Region，数据盘显示类型会有不同。数据盘默认随着集群的释放而释放。
    -   **数据盘大小**：每块最小为200 GB，最大为4000 GB。默认值为300GB。
    -   **数量**：数据盘的数量，最小设置为1台，最大设置为10台。 |

6.  完成上述参数配置后，单击**创建**。

    创建成功后，**状态**变为**空闲**。

    **说明：** 如果您需要手动搭建Gateway集群，具体请参见[手动搭建Gateway连接阿里云E-MapReduce](https://developer.aliyun.com/article/741917?spm=a2c6h.12873581.0.dArticle741917.4c73454drDXopl&groupCode=aliyunemr)。


## 问题反馈

如果您在使用阿里云E-MapReduce过程中有任何疑问，欢迎您扫描下面的二维码加入钉钉群进行反馈。

![emr_dingding](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/2440659951/p81620.png)

